# 成長グラフの表示仕様

成長パネル画面で表示される成長グラフの表示仕様を整理しています。

（随時情報を追加あるいは詳細にしてください）


## 全体概要

- アクセス時~初期表示~では「現在」が表示される。
- 成長グラフ下部に設定されているタイムラインで日付押下を行うと、押下した日付のポイントと縦線が強調される。
- 成長グラフ横の左右矢印で表示している期間を変更できる。

[storybook](http://localhost:4000/storybook/chart_graph/growth_graph)

## 現在

- `skill_class_scores`テーブルを参照する

### 現在の即時および1日単位表示

「現在」が表示されており、かつ、「自分との比較」「他者との比較」を表示していないときに、1つ前のタイムライン過去時点から現在までの変遷が表示される。

**即時表示について**

スコアを入力した後に、直前スコアと違いがわかるように点を表示し「現在」点とつなぐ。

- 直前スコア点と現在点は少し幅を持たせて表示される（後述の1日単位表示の日間隔よりも広い）
- `skill_class_score_logs`テーブルを参照する。
- ただし、1つ前のタイムライン過去時点以降で初めてのスコア入力だった場合は、1つ前のタイムライン過去時点のスコアを直前スコア点になる。
  - この場合は`historical_skill_class_scores`テーブルを参照する。
- ただし、初めてのスコア入力だった場合は、0を直前スコア点とする。
  - この場合は参照するテーブルがないのでロジカルに0を描画する。

**1日単位表示について**

- 即時表示点を描画したうえで、それよりも過去の変遷を1日区切りで表示する。
- ある1日に複数回更新している場合は、最も遅い時刻の更新のスコアを採用する。
- 1つ前のタイムライン過去時点の日付から対象となる。
  - このデータはタイムライン上の`2023-10-01`の真上には表示されない（1日目のデータとして表示される）。
- データがない日付には点が表示されない。


## 過去

- `historical_skill_class_scores`テーブルを参照する。
- 例えば、タイムラインで`2023.10`を押した場合には、`historical_skill_class_scores.locked_date`が`2023-10-01`のデータが参照される。

## 未来

TODO: 未実装

## 自分との比較

- 比較用に別の線が加わる。
- 自分とは異なる色で描画される。

## 他者との比較

- 比較用に別の線が加わる。
- タイムラインもまた別に存在し、表示期間をずらすことができる。
- 他者の線が自分とは異なる色で描画される。

## ロールモデルとの比較

TODO: 未実装

